<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<header th:replace="include/header"></header>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script
	src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=59113c13fb94cdb62925a139a684253e&libraries=clusterer"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

</head>
<body>
	<!-- Hero Slider -->
	<section class="bg-cencer bg-cover"
		style="background: url(/img/mainphoto/4.jpg);">
		<div class="dark-overlay">
			<div class="overlay-content py-5 index-forward">
				<div class="container py-5 mt-5">
					<div class="row py-1 text-white text-center">
						<div class="col-lg-7 mx-auto">
							<h1 class="text-xl">핫스팟</h1>
							<p class="lead">매일, 주, 한달 단위로 베스트 사진을 선정합니다.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<br>
	<br>
	<br>
	<br>
	<div class="container">

		<div class="search_button button" style="margin-left: 750px;">
			<button id="day" type="button" class="btn btn-outline-danger">일간</button>
			<button id="week" type="button" class="btn btn-outline-success">주간</button>
			<button id="month" type="button" class="btn btn-outline-primary">월간</button>
			<br> <br>
		</div>

		<div class="row">

			<div class="col-sm-5">
				<div id="map" style="width: 430px; height: 525px;"></div>
				<br>
				
				<!-- <form action="/hotspot/hotspot_locate">
					<div>
						<input name="keyword" type="text" placeholder="검색할 내용">
						<select name="keyword">
							<option value="서울">서울</option>
							<option value="대구">대구</option>
							<option value="경주">경주</option>
						</select>
						<button type="button" class="btn btn-primary">검색하기</button>
					</div>
				</form> -->

			</div>

			<div class="col-sm-6">
				<div>
					<section style="padding-bottom: 0px; padding-top: 0px;">
						<form role="form" method="get">
							<table class="table table-hover" style="text-align: center;">
								<thead>
									 <tr>
										<th>사진</th>
										<th>제목</th>
										<th>날짜</th>
										<th>위치</th>
										<th>추천수</th>
									</tr>
								</thead>
								<tbody th:each="info:${info}">
									<tr id="detail" class="godetail">
										<td th:id="${info.p_num}"><img th:src="${info.pic_file}"
											width=150, height=150></td>
										<a><td th:id="${info.p_num}" th:text="${info.p_title}"></td>
											<td th:id="${info.p_num}"
											th:text="${#dates.format(info.p_day, 'M월 dd일')}"></td>
											<td th:id="${info.p_num}" th:text="${info.p_area}"></td>
											<td th:id="${info.p_num}" th:text="${info.p_recommend}"></td></a>
										<input type="hidden" id="lat" th:value="${info.pic_latitude}">
										<input type="hidden" id="lng" th:value="${info.pic_longitude}">
									</tr>
								</tbody>
							</table>
						</form>
					</section>
				</div>
			</div>
			<input type="hidden" id="page" value="day" th:value="${page}">
		</div>

	</div>

	<script>
		$('.search_button button').click(function() {

			location.href = "/gallery/testpage/" + this.id;
		});

		$('#detail td').click(
				function() {
					$(location).attr('href',
							'http://localhost:4007/gallery/detail/' + this.id);
				});

		// 좌표불러오기
		$(document).ready(
				function() {
					$.ajax({
						url : "/gallery/test/" + $("#page").val(),
						type : "GET",
						cache : false,
						success : function(data) {
							for (var i = 0; i < data.length; i++) {
								var marker = new kakao.maps.Marker({
									map : map, // 마커를 표시할 지도
									position : new kakao.maps.LatLng(
											data[i].pic_latitude,
											data[i].pic_longitude)

								// 마커의 위치
								});
							}
							marker.setMap(map);
						}
					});
				});
		var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
		mapOption = {
			center : new kakao.maps.LatLng(35.896285, 128.622003), // 지도의 중심좌표
			level : 13
		// 지도의 확대 레벨
		};

		var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

		// 마커가 표시될 위치입니다 
		var markerPosition = new kakao.maps.LatLng(33.450701, 126.570667);
	</script>
	<div class="push" style="height: 390px;"></div>
	<!-- <footer class="footer"  th:replace="include/footer"></footer> -->
</body>
</html>